#summary How to build the extension

= Introduction =

Building python-libarchive should be relatively easy. However, there is a case where it is made more difficult.

Because python-libarchive targets libarchive 3.0.x, it will not link against older versions. This means you must have a (as of writing) beta version of the library installed. If you distro uses libarchive in some of the base packages, you will need to manually install the library into a non-standard location and link against it there.

The setup.py file has some modifications that allow you to pass to it the required linker arguments.

= Installing libarchive =

Many Linux distributions include libarchive 2. This extension only works with libarchive 3. In these cases, you must install libarchive to a /usr/local. This will allow it to co-exist with the version installed with your distribution. To install libarchive into /usr/local, follow the instructions below.

{{{
$ wget http://libarchive.googlecode.com/files/libarchive-3.0.3.tar.gz
$ tar xzf libarchive-3.0.3.tar.gz
$ cd libarchive-3.0.3/
$ build/autogen.sh
$ ./configure --prefix=/usr/local
$ make
$ sudo make install
}}}

Now that the library is installed, you need to tell ld where to find it. The easiest way to do this is to add /usr/local/lib to the ld.so.conf.

{{{
$ sudo sh -c 'echo /usr/local/lib > /etc/ld.so.conf.d/libarchive3.conf'
$ sudo ldconfig
}}}

Now libarchive 3.0.3 is installed into /usr/local/. The next step is to build and install python-libarchive.

= Installing python-libarchive =

Now that libarchive is installed, you can install the python extension using the steps below.

{{{
$ wget http://python-libarchive.googlecode.com/files/python-libarchive-3.0.1-1.tar.gz
$ tar xzf libarchive-3.0.3-1.tar.gz
$ cd python-libarchive-3.0.3-1
$ sudo python setup.py install
}}}

You can also try using pip.

{{
pip install python-libarchive
}}}

This will explicitly link against version 3.0.3 of the library.